## top 명령어
- 현재 OS의 상태를 보여주는 CLI 어플리케이션
- 메모리 사용량, CPU 사용량 등을 나타내며 top을 실행하는 동안 주기적으로 업데이트해 실시간에 근접한 내용을 보여준다. (주기는 사용자가 지정 가능)

## 시스템 정보 (상단 5줄)
- 전체 프로세스가 OS에 대해서 리소스를 어느정도 차지하고 있는지 나타냄

    1. 시간 정보
    2. load average
    3. 태스크 정보
    4. cpu 사용량
    5. 메모리 사용량

### 1. 시간 정보
- 시스템 현재 시간, OS가 살아있는 시간, 유저 세션 수
- 왼쪽부터 시스템 현재 시간(GMT기준. 한국은 +9)
- OS 살아있는 시간은 days, h, m 순으로 출력
- `uptime` 명령어로도 확인이 가능하다.
- user 세션 수는 `who` 명령어로 확인 가능

### 2. Load Average
- CPU 부하의 EMA(지수 이동 평균)값
- 앞에서부터 **1분/5분/15분** 값
- CPU Load : CPU가 수행하는 작업의 양. 리눅스에서는 실행되거나 대기중인 프로세스의 평균
- `-nproc` 명령어로 코어 개수 확인 가능
- 싱글코어 기준으로 1.0이면 100%, 0.5면 50%. 100%일 경우 부하가 꽉 차서 여유가 없지만 돌아는 가는 상황
- 100%를 넘어가면 부하가 너무 크니 시스템 확인이 필요하다.

### 3. Tasks
- 현재 프로세스들의 상태를 나타내는 영역 (거시적인 관점)
- 프로세스 : 실행 중인 프로그램

        `total` : 전체 프로세스
        `running` : CPU에 의해서 명령어가 실행중인 프로세스
        `sleeping` : 대기 상태인 프로세스
        `stopped` : 종료된 프로세스 (ex. Ctrl+Z)
        `zombies` : 프로세스 자체는 종료되었지만 부모 프로세스가 wait() 시스템 콜을 하지 않아 시스템 프로세스 테이블에 남아있는 프로세스

- 좀비 프로세스를 확실하게 죽이는 방법은 부모 프로세스 자체를 종료하는 것이지만, 그렇게 되면 부모 프로세스 하위에 있는 다른 프로세스들도 함께 종료되니 그 점을 주의해야 한다.
- 프로세스는 일반적으로 IO bound와 CPU bound 일을 번갈아 수행
- IO bound 일을 할 때 CPU는 idle 타임에 들어간다.
- 프로세스 스케줄링 알고리즘에 의해 프로세스는 번갈아 실행 (멀티태스킹)


### 4. CPU 사용량
- us + sy + ni + id + wa + hi + si + st = 100%

        `us` : user mode. 높은 우선순위의 프로세스가 CPU를 얼마나 점유했는가  
        `sy` : kernel mode.  
        `ni` : nice 값. 작을수록 우선순위가 높음  
        `id` : idle. 아무것도 안 하는 상태  
        `wa` : I/O wait. 처리 요청 후 완료될 때까지 시간. 이 수치가 높으면 I/O 처리가 지연되고 있음을 시사  
        `hi` : hard irq. 인터럽트 전반부(빠른) 처리  
        `si` : soft irq. 인터럽트 후반부(느린) 처리  
        `st` : 가상 CPU 구동. 가상 CPU를 구동하기 위해 얼마나 cpu를 사용했는가  


### 5. 메모리 사용량
- **Mem** : RAM의 메모리 영역
- **Swap** : swap 메모리 영역. Mem이 가득 찼을 때 swap 영역 사용. 디스크이기 때문에 RAM보다 많이 느림
- total = free + used + buff/cache
- used = total - free - buffers - cache

        `total` : 총 메모리 양
        `free` : 사용가능한 메모리 양
        `used` : 사용중인 메모리 양
        `buff/cache` : 버퍼캐시 또는 페이지 캐시가 이용하는 메모리. 이 메모리 덕분에 I/O처리 속도가 상대적으로 빨라질 수 있다. 시스템의 빈 메모리(free 필드 값)가 부족하면 커널이 해제한다.
        buff : 커널 버퍼에서 사용되는 메모리
        cache : disk의 페이지 캐시
        `available` : free 필드값의 메모리가 부족하면 해제되는 커널 내의 메모리 영역 사이즈를 더한 값.
        
        * 캐시 메모리 : CPU가 메모리에 접근하는 속도는 CPU의 연산 속도보다 느리다. 그래서 레지스터보다 용량이 크고 메모리보다 빠른 SRAM 기반의 캐시 메모리를 CPU와 메모리 사이에 두어 연산 속도와의 차이를 줄인다.
